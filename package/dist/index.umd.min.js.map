{"version":3,"file":"index.umd.min.js","sources":["../../src/config.js","../../node_modules/nanoid/non-secure/index.js","../../src/components/TargetContainer.js","../../src/components/Portal.js","../../src/index.js"],"sourcesContent":["import { nanoid } from 'nanoid/non-secure'\r\n\r\nconst config = {\r\n  selector: `vue-portal-target-${nanoid()}`,\r\n}\r\nexport default config\r\n\r\nexport const setSelector = selector => (config.selector = selector)\r\n\r\nexport const isBrowser =\r\n  typeof window !== 'undefined' && typeof document !== undefined\r\n","// This alphabet uses `A-Za-z0-9_-` symbols. The genetic algorithm helped\n// optimize the gzip compression for this alphabet.\nlet urlAlphabet =\n  'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW'\n\nlet customAlphabet = (alphabet, size) => {\n  return () => {\n    let id = ''\n    // A compact alternative for `for (var i = 0; i < step; i++)`.\n    let i = size\n    while (i--) {\n      // `| 0` is more compact and faster than `Math.floor()`.\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  let i = size\n  while (i--) {\n    // `| 0` is more compact and faster than `Math.floor()`.\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet }\n","import Vue from 'vue'\r\nexport default Vue.extend({\r\n  // as an abstract component, it doesn't appear in\r\n  // the $parent chain of components.\r\n  // which means the next parent of any component rendered inside of this oen\r\n  // will be the parent from which is was portal'd\r\n  abstract: true,\r\n  name: 'PortalOutlet',\r\n  props: ['nodes', 'tag'],\r\n  data: vm => ({\r\n    updatedNodes: vm.nodes,\r\n  }),\r\n  render(h) {\r\n    const nodes = this.updatedNodes && this.updatedNodes()\r\n    if (!nodes) return h()\r\n    return nodes.length < 2 && !nodes[0].text\r\n      ? nodes\r\n      : h(this.tag || 'DIV', nodes)\r\n  },\r\n  destroyed() {\r\n    const { $el: el } = this\r\n    el.parentNode.removeChild(el)\r\n  },\r\n})\r\n","import Vue from 'vue'\r\nimport config, { isBrowser } from '../config'\r\nimport TargetContainer from './TargetContainer'\r\n\r\nexport default Vue.extend({\r\n  name: 'VueSimplePortal',\r\n  props: {\r\n    disabled: {\r\n      type: Boolean,\r\n    },\r\n    prepend: {\r\n      type: Boolean,\r\n    },\r\n    selector: {\r\n      type: String,\r\n      default: () => `#${config.selector}`,\r\n    },\r\n    tag: {\r\n      type: String,\r\n      default: 'DIV',\r\n    },\r\n  },\r\n  render(h) {\r\n    if (this.disabled) {\r\n      const nodes = this.$scopedSlots && this.$scopedSlots.default()\r\n      if (!nodes) return h()\r\n      return nodes.length < 2 && !nodes[0].text ? nodes : h(this.tag, nodes)\r\n    }\r\n    return h()\r\n  },\r\n  created() {\r\n    if (!this.getTargetEl()) {\r\n      this.insertTargetEl()\r\n    }\r\n  },\r\n  updated() {\r\n    // We only update the target container component\r\n    // if the scoped slot function is a fresh one\r\n    // The new slot syntax (since Vue 2.6) can cache unchanged slot functions\r\n    // and we want to respect that here.\r\n    this.$nextTick(() => {\r\n      if (!this.disabled && this.slotFn !== this.$scopedSlots.default) {\r\n        this.container.updatedNodes = this.$scopedSlots.default\r\n      }\r\n      this.slotFn = this.$scopedSlots.default\r\n    })\r\n  },\r\n  beforeDestroy() {\r\n    this.unmount()\r\n  },\r\n  watch: {\r\n    disabled: {\r\n      immediate: true,\r\n      handler(disabled) {\r\n        disabled ? this.unmount() : this.$nextTick(this.mount)\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    // This returns the element into which the content should be mounted.\r\n    getTargetEl() {\r\n      if (!isBrowser) return\r\n      return document.querySelector(this.selector)\r\n    },\r\n    insertTargetEl() {\r\n      if (!isBrowser) return\r\n      const parent = document.querySelector('body')\r\n      const child = document.createElement(this.tag)\r\n      child.id = this.selector.substring(1)\r\n      parent.appendChild(child)\r\n    },\r\n    mount() {\r\n      if (!isBrowser) return\r\n      const targetEl = this.getTargetEl()\r\n      const el = document.createElement('DIV')\r\n      if (this.prepend && targetEl.firstChild) {\r\n        targetEl.insertBefore(el, targetEl.firstChild)\r\n      } else {\r\n        targetEl.appendChild(el)\r\n      }\r\n\r\n      this.container = new TargetContainer({\r\n        el,\r\n        parent: this,\r\n        propsData: {\r\n          tag: this.tag,\r\n          nodes: this.$scopedSlots.default,\r\n        },\r\n      })\r\n    },\r\n    unmount() {\r\n      if (this.container) {\r\n        this.container.$destroy()\r\n        delete this.container\r\n      }\r\n    },\r\n  },\r\n})\r\n","import Vue from 'vue'\r\nimport Portal from './components/Portal'\r\nimport config, { setSelector } from './config'\r\n\r\nfunction install(_Vue, options = {}) {\r\n  _Vue.component(options.name || 'portal', Portal)\r\n  if (options.defaultSelector) {\r\n    setSelector(options.defaultSelector)\r\n  }\r\n}\r\n\r\nif (typeof window !== 'undefined' && window.Vue && window.Vue === Vue) {\r\n  // plugin was inlcuded directly in a browser\r\n  Vue.use(install)\r\n}\r\n\r\nexport default install\r\nexport { Portal, setSelector, config }\r\n"],"names":["config","selector","size","id","i","Math","random","nanoid","setSelector","isBrowser","window","undefined","document","Vue","extend","abstract","name","props","data","vm","updatedNodes","nodes","render","h","this","length","text","tag","destroyed","el","$el","parentNode","removeChild","disabled","type","Boolean","prepend","String","default","$scopedSlots","created","getTargetEl","insertTargetEl","updated","$nextTick","_this","slotFn","container","beforeDestroy","unmount","watch","immediate","handler","mount","methods","querySelector","parent","child","createElement","substring","appendChild","targetEl","firstChild","insertBefore","TargetContainer","propsData","$destroy","install","_Vue","options","component","Portal","defaultSelector","use"],"mappings":";;;;;;;;khBAEA,IAAMA,EAAS,CACbC,qCCeW,EAACC,EAAO,MACnB,IAAIC,EAAK,GAELC,EAAIF,EACR,KAAOE,KAELD,GArBF,mEAqBqC,GAAhBE,KAAKC,SAAiB,GAE3C,OAAOH,GDvBwBI,KAIpBC,EAAc,SAAAP,UAAaD,EAAOC,SAAWA,GAE7CQ,EACO,oBAAXC,aAA8CC,yBAAbC,uBAAAA,aET3BC,EAAIC,OAAO,CAKxBC,UAAU,EACVC,KAAM,eACNC,MAAO,CAAC,QAAS,OACjBC,KAAM,SAAAC,SAAO,CACXC,aAAcD,EAAGE,QAEnBC,gBAAOC,OACCF,EAAQG,KAAKJ,cAAgBI,KAAKJ,sBACnCC,EACEA,EAAMI,OAAS,IAAMJ,EAAM,GAAGK,KACjCL,EACAE,EAAEC,KAAKG,KAAO,MAAON,GAHNE,KAKrBK,yBACeC,EAAOL,KAAZM,IACRD,EAAGE,WAAWC,YAAYH,QCjBfhB,EAAIC,OAAO,CACxBE,KAAM,kBACNC,MAAO,CACLgB,SAAU,CACRC,KAAMC,SAERC,QAAS,CACPF,KAAMC,SAERlC,SAAU,CACRiC,KAAMG,OACNC,QAAS,4BAAUtC,EAAOC,YAE5B0B,IAAK,CACHO,KAAMG,OACNC,QAAS,QAGbhB,gBAAOC,MACDC,KAAKS,SAAU,KACXZ,EAAQG,KAAKe,cAAgBf,KAAKe,aAAaD,iBAChDjB,EACEA,EAAMI,OAAS,IAAMJ,EAAM,GAAGK,KAAOL,EAAQE,EAAEC,KAAKG,IAAKN,GAD7CE,WAGdA,KAETiB,mBACOhB,KAAKiB,oBACHC,kBAGTC,mCAKOC,WAAU,WACRC,EAAKZ,UAAYY,EAAKC,SAAWD,EAAKN,aAAaD,UACtDO,EAAKE,UAAU3B,aAAeyB,EAAKN,aAAaD,SAElDO,EAAKC,OAASD,EAAKN,aAAaD,YAGpCU,8BACOC,WAEPC,MAAO,CACLjB,SAAU,CACRkB,WAAW,EACXC,iBAAQnB,GACNA,EAAWT,KAAKyB,UAAYzB,KAAKoB,UAAUpB,KAAK6B,UAItDC,QAAS,CAEPb,0BACOhC,SACEG,SAAS2C,cAAc/B,KAAKvB,WAErCyC,6BACOjC,OACC+C,EAAS5C,SAAS2C,cAAc,QAChCE,EAAQ7C,SAAS8C,cAAclC,KAAKG,KAC1C8B,EAAMtD,GAAKqB,KAAKvB,SAAS0D,UAAU,GACnCH,EAAOI,YAAYH,KAErBJ,oBACO5C,OACCoD,EAAWrC,KAAKiB,cAChBZ,EAAKjB,SAAS8C,cAAc,OAC9BlC,KAAKY,SAAWyB,EAASC,WAC3BD,EAASE,aAAalC,EAAIgC,EAASC,YAEnCD,EAASD,YAAY/B,QAGlBkB,UAAY,IAAIiB,EAAgB,CACnCnC,GAAAA,EACA2B,OAAQhC,KACRyC,UAAW,CACTtC,IAAKH,KAAKG,IACVN,MAAOG,KAAKe,aAAaD,aAI/BW,mBACMzB,KAAKuB,iBACFA,UAAUmB,kBACR1C,KAAKuB,eCzFpB,SAASoB,EAAQC,OAAMC,yDAAU,GAC/BD,EAAKE,UAAUD,EAAQrD,MAAQ,SAAUuD,GACrCF,EAAQG,iBACVhE,EAAY6D,EAAQG,iBAIF,oBAAX9D,QAA0BA,OAAOG,KAAOH,OAAOG,MAAQA,GAEhEA,EAAI4D,IAAIN"}