{"version":3,"file":"index.umd.min.js","sources":["../../src/config.js","../../node_modules/nanoid/non-secure/index.js","../../src/components/TargetContainer.js","../../src/components/Portal.js","../../src/index.js"],"sourcesContent":["import { nanoid } from 'nanoid/non-secure'\n\nconst config = {\n  selector: `vue-portal-target-${nanoid()}`,\n}\nexport default config\n\nexport const setSelector = selector => (config.selector = selector)\n\nexport const isBrowser =\n  typeof window !== 'undefined' && typeof document !== undefined\n","// This alphabet uses `A-Za-z0-9_-` symbols. The genetic algorithm helped\n// optimize the gzip compression for this alphabet.\nlet urlAlphabet =\n  'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW'\n\nlet customAlphabet = (alphabet, size) => {\n  return () => {\n    let id = ''\n    // A compact alternative for `for (var i = 0; i < step; i++)`.\n    let i = size\n    while (i--) {\n      // `| 0` is more compact and faster than `Math.floor()`.\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  let i = size\n  while (i--) {\n    // `| 0` is more compact and faster than `Math.floor()`.\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet }\n","import Vue from 'vue'\nexport default Vue.extend({\n  // as an abstract component, it doesn't appear in\n  // the $parent chain of components.\n  // which means the next parent of any component rendered inside of this oen\n  // will be the parent from which is was sent\n  // @ts-expect-error\n  abstract: true,\n  name: 'PortalOutlet',\n  props: ['nodes', 'tag'],\n  data: vm => ({\n    updatedNodes: vm.nodes,\n  }),\n  render(h) {\n    const nodes = this.updatedNodes && this.updatedNodes()\n    if (!nodes) return h()\n    return nodes.length === 1 && !nodes[0].text\n      ? nodes\n      : h(this.tag || 'DIV', nodes)\n  },\n  destroyed() {\n    const { $el: el } = this\n    el && el.parentNode.removeChild(el)\n  },\n})\n","import Vue from 'vue'\nimport config, { isBrowser } from '../config'\nimport TargetContainer from './TargetContainer'\n\nexport default Vue.extend({\n  name: 'VueSimplePortal',\n  props: {\n    disabled: {\n      type: Boolean,\n    },\n    prepend: {\n      type: Boolean,\n    },\n    selector: {\n      type: String,\n      default: () => `#${config.selector}`,\n    },\n    tag: {\n      type: String,\n      default: 'DIV',\n    },\n  },\n  render(h) {\n    if (this.disabled) {\n      const nodes = this.$scopedSlots && this.$scopedSlots.default()\n      if (!nodes) return h()\n      return nodes.length < 2 && !nodes[0].text ? nodes : h(this.tag, nodes)\n    }\n    return h()\n  },\n  created() {\n    if (!this.getTargetEl()) {\n      this.insertTargetEl()\n    }\n  },\n  updated() {\n    // We only update the target container component\n    // if the scoped slot function is a fresh one\n    // The new slot syntax (since Vue 2.6) can cache unchanged slot functions\n    // and we want to respect that here.\n    this.$nextTick(() => {\n      if (!this.disabled && this.slotFn !== this.$scopedSlots.default) {\n        this.container.updatedNodes = this.$scopedSlots.default\n      }\n      this.slotFn = this.$scopedSlots.default\n    })\n  },\n  beforeDestroy() {\n    this.unmount()\n  },\n  watch: {\n    disabled: {\n      immediate: true,\n      handler(disabled) {\n        disabled ? this.unmount() : this.$nextTick(this.mount)\n      },\n    },\n  },\n  methods: {\n    // This returns the element into which the content should be mounted.\n    getTargetEl() {\n      if (!isBrowser) return\n      return document.querySelector(this.selector)\n    },\n    insertTargetEl() {\n      if (!isBrowser) return\n      const parent = document.querySelector('body')\n      const child = document.createElement(this.tag)\n      child.id = this.selector.substring(1)\n      parent.appendChild(child)\n    },\n    mount() {\n      if (!isBrowser) return\n      const targetEl = this.getTargetEl()\n      const el = document.createElement('DIV')\n      if (this.prepend && targetEl.firstChild) {\n        targetEl.insertBefore(el, targetEl.firstChild)\n      } else {\n        targetEl.appendChild(el)\n      }\n\n      this.container = new TargetContainer({\n        el,\n        parent: this,\n        propsData: {\n          tag: this.tag,\n          nodes: this.$scopedSlots.default,\n        },\n      })\n    },\n    unmount() {\n      if (this.container) {\n        this.container.$destroy()\n        delete this.container\n      }\n    },\n  },\n})\n","import Vue from 'vue'\nimport Portal from './components/Portal'\nimport config, { setSelector } from './config'\n\nfunction install(_Vue, options = {}) {\n  _Vue.component(options.name || 'portal', Portal)\n  if (options.defaultSelector) {\n    setSelector(options.defaultSelector)\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue && window.Vue === Vue) {\n  // plugin was inlcuded directly in a browser\n  Vue.use(install)\n}\n\nexport default install\nexport { Portal, setSelector, config }\n"],"names":["config","selector","size","id","i","Math","random","nanoid","setSelector","isBrowser","window","undefined","document","Vue","extend","abstract","name","props","data","vm","updatedNodes","nodes","render","h","this","length","text","tag","destroyed","el","$el","parentNode","removeChild","disabled","type","Boolean","prepend","String","default","$scopedSlots","created","getTargetEl","insertTargetEl","updated","$nextTick","_this","slotFn","container","beforeDestroy","unmount","watch","immediate","handler","mount","methods","querySelector","parent","child","createElement","substring","appendChild","targetEl","firstChild","insertBefore","TargetContainer","propsData","$destroy","install","_Vue","options","component","Portal","defaultSelector","use"],"mappings":";;;;;;;;khBAEA,IAAMA,EAAS,CACbC,qCCeW,EAACC,EAAO,MACnB,IAAIC,EAAK,GAELC,EAAIF,EACR,KAAOE,KAELD,GArBF,mEAqBqC,GAAhBE,KAAKC,SAAiB,GAE3C,OAAOH,GDvBwBI,KAIpBC,EAAc,SAAAP,UAAaD,EAAOC,SAAWA,GAE7CQ,EACO,oBAAXC,aAA8CC,yBAAbC,uBAAAA,aET3BC,EAAIC,OAAO,CAMxBC,UAAU,EACVC,KAAM,eACNC,MAAO,CAAC,QAAS,OACjBC,KAAM,SAAAC,SAAO,CACXC,aAAcD,EAAGE,QAEnBC,gBAAOC,OACCF,EAAQG,KAAKJ,cAAgBI,KAAKJ,sBACnCC,EACmB,IAAjBA,EAAMI,QAAiBJ,EAAM,GAAGK,KAEnCH,EAAEC,KAAKG,KAAO,MAAON,GADrBA,EAFeE,KAKrBK,yBACeC,EAAOL,KAAZM,IACRD,GAAMA,EAAGE,WAAWC,YAAYH,QClBrBhB,EAAIC,OAAO,CACxBE,KAAM,kBACNC,MAAO,CACLgB,SAAU,CACRC,KAAMC,SAERC,QAAS,CACPF,KAAMC,SAERlC,SAAU,CACRiC,KAAMG,OACNC,QAAS,4BAAUtC,EAAOC,YAE5B0B,IAAK,CACHO,KAAMG,OACNC,QAAS,QAGbhB,gBAAOC,MACDC,KAAKS,SAAU,KACXZ,EAAQG,KAAKe,cAAgBf,KAAKe,aAAaD,iBAChDjB,EACEA,EAAMI,OAAS,IAAMJ,EAAM,GAAGK,KAAOL,EAAQE,EAAEC,KAAKG,IAAKN,GAD7CE,WAGdA,KAETiB,mBACOhB,KAAKiB,oBACHC,kBAGTC,mCAKOC,WAAU,WACRC,EAAKZ,UAAYY,EAAKC,SAAWD,EAAKN,aAAaD,UACtDO,EAAKE,UAAU3B,aAAeyB,EAAKN,aAAaD,SAElDO,EAAKC,OAASD,EAAKN,aAAaD,YAGpCU,8BACOC,WAEPC,MAAO,CACLjB,SAAU,CACRkB,WAAW,EACXC,iBAAQnB,GACNA,EAAWT,KAAKyB,UAAYzB,KAAKoB,UAAUpB,KAAK6B,UAItDC,QAAS,CAEPb,0BACOhC,SACEG,SAAS2C,cAAc/B,KAAKvB,WAErCyC,6BACOjC,OACC+C,EAAS5C,SAAS2C,cAAc,QAChCE,EAAQ7C,SAAS8C,cAAclC,KAAKG,KAC1C8B,EAAMtD,GAAKqB,KAAKvB,SAAS0D,UAAU,GACnCH,EAAOI,YAAYH,KAErBJ,oBACO5C,OACCoD,EAAWrC,KAAKiB,cAChBZ,EAAKjB,SAAS8C,cAAc,OAC9BlC,KAAKY,SAAWyB,EAASC,WAC3BD,EAASE,aAAalC,EAAIgC,EAASC,YAEnCD,EAASD,YAAY/B,QAGlBkB,UAAY,IAAIiB,EAAgB,CACnCnC,GAAAA,EACA2B,OAAQhC,KACRyC,UAAW,CACTtC,IAAKH,KAAKG,IACVN,MAAOG,KAAKe,aAAaD,aAI/BW,mBACMzB,KAAKuB,iBACFA,UAAUmB,kBACR1C,KAAKuB,eCzFpB,SAASoB,EAAQC,OAAMC,yDAAU,GAC/BD,EAAKE,UAAUD,EAAQrD,MAAQ,SAAUuD,GACrCF,EAAQG,iBACVhE,EAAY6D,EAAQG,iBAIF,oBAAX9D,QAA0BA,OAAOG,KAAOH,OAAOG,MAAQA,GAEhEA,EAAI4D,IAAIN"}